;; -*- mode: emacs-lisp -*-

(defun neeasade/style ()
  ; re-reference
  (dotspacemacs/init)

  (setq powerline-default-separator (get-resource "emacs.powerline" "bar"))

  (custom-set-faces
   '(spacemacs-normal-face ((t (:inherit 'mode-line)))))

  (set-face-background 'font-lock-comment-face nil)

  ; todo: make this on all frames, not just current
  (set-frame-parameter (selected-frame) 'internal-border-width
                       (string-to-number (get-resource "st.borderpx" "10")))

  ; sync w/ term background
  (set-background-color
   (get-resource "*.background"
                 (face-attribute 'default :background)))

  ; assume softer vertical border by matching comment face
  (set-face-attribute 'vertical-border
                      nil
                      :foreground (face-attribute 'font-lock-comment-face :foreground))

  ; this doesn't persist across new frames even though the docs say it should
  (set-face-attribute 'fringe nil :background nil)
  (add-hook 'after-make-frame-functions
            (lambda (frame)
              (set-face-attribute 'fringe nil :background nil)
              )
            )

  ; set font on current and future
  (dotspacemacs/getfont)
  (set-face-attribute 'default nil :font (dotspacemacs/getfont))
  (set-frame-font (dotspacemacs/getfont) nil t)

  ; NO BOLD (set-face-bold-p doesn't cover everything, some fonts use slant and underline as bold...)
  (mapc (lambda (face)
          (set-face-attribute face nil
                              :weight 'normal
                              :underline nil
                              :slant 'normal
                              ;:inherit nil
                              ))
        (face-list))

  ; done at end so it has correct font reference
  (spaceline-compile)
  )
